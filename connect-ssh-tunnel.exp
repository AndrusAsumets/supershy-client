#!/usr/bin/expect -f

set server [lrange $argv 0 0]
set name [lrange $argv 1 1]
set key [lrange $argv 2 2]

spawn -ignore HUP ssh $name@$server -o StrictHostKeyChecking=yes -f -N -L 8888:localhost:8888 -i $key
expect "*?assphrase:*"
send -- "\r"
interact
expect_background

send_user ">>> spawned process backgrounding successful\n"
exit 0