#!/usr/bin/expect -f

set passphrase [lrange $argv 0 0]
set path [lrange $argv 1 1]

spawn ssh-keygen -t ed25519 -f $path
expect "*passphrase*"
send -- "$passphrase\r"
expect "*?again:*"
send -- "$passphrase\r"
interact
exit 0